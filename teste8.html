<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Calculadora Java Script</title>
    <style>
        /*Esta é uma folha estilo CSS*/
        .output {
            font-weight: bold;
        }

        /* valores calculados em negrito*/
        #payment {
            text-decoration: underline;
        }

        #graph {
            border: solid black 1px;
        }

        th,
        td {
            vertical-align: top;
        }
    </style>
</head>

<body>
    <table>
        <tr>
            <th>Enter Loan Data:</th>
            <td></td>
            <th>Loan Balance, Cumulative Equity, and Interest Payments</th>
        </tr>
        <tr>
            <td>Amount of the loan ($):</td>
            <td><input id="amount" onchange="calculate();"></td>
            <td rowspan="8">
                <canvas id="graph" width="400" height="250"></canvas>
            </td>
        </tr>
        <tr>
            <td>Annual Interest (%):</td>
            <td><input id="apr" onchange="calculate();"></td>
        </tr>
        <tr>
            <td>Repayment period (years):</td>
            <td><input id="years" onchange="calculate();"></td>
        </tr>
        <tr>
            <td>Zipcode (to find lenders):</td>
            <td><input id="zipcode" onchange="calculate();"></td>
        </tr>
        <tr>
            <th>Approximate Payments:</th>
            <td><button onclick="calculate();">Calculate</button></td>
        </tr>
        <tr>
            <td>Monthly payment:</td>
            <td>$<span class="output" id="payment"></span></td>
        </tr>
        <tr>
            <td>Total payment:</td>
            <td>$<span class="output" id="total"></span></td>
        </tr>
        <tr>
            <td>Total Interest:</td>
            <td>$<span class="output" id="total_interest"></span></td>
        </tr>
        <tr>
            <th>Sponsors:</th>
            <td colspan="2">
                Apply for your loan with one of these fine lenders:
                <div id="lenders"></div>
            </td>
        </tr>
    </table>

    <script>
        function calculate() {
            let amount = parseFloat(document.getElementById("amount").value);
            let apr = parseFloat(document.getElementById("apr").value);
            let years = parseFloat(document.getElementById("years").value);
            let zipcode = parseInt(document.getElementById("zipcode").value);
            let payment = document.getElementById("payment");
            let total = document.getElementById("total");
            let total_interest = document.getElementById("total_interest");

            let principal = amount;
            let interest = apr / 100 / 12;
            let payments = years * 12;
            let x = Math.pow(1 + interest, payments);
            let monthly = (principal * x * interest) / (x - 1);

            if (isFinite(monthly)) {
                payment.innerHTML = monthly.toFixed(2);
                total.innerHTML = (monthly * payments).toFixed(2);
                total_interest.innerHTML = ((monthly * payments) - principal).toFixed(2);
            } else {
                payment.innerHTML = "";
                total.innerHTML = "";
                total_interest.innerHTML = "";
            }
            // Código para exibir os patrocinadores
            let lenders = document.getElementById("lenders");
            lenders.innerHTML = "Apply for your loan with one of these fine lenders:";

            // Código para adicionar os patrocinadores
            let sponsors = ["Lender 1", "Lender 2", "Lender 3"];
            sponsors.forEach(function (sponsor) {
                let sponsorElement = document.createElement("p");
                sponsorElement.innerHTML = sponsor;
                lenders.appendChild(sponsorElement);
            });
        }
    </script>
</body>
</html>